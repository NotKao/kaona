local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "The Strongest Battlegrounds Moveset Library",
   Icon = 0, -- Icon in Topbar. Can use Lucide Icons (string) or Roblox Image (number). 0 to use no icon (default).
   LoadingTitle = "TSB Moveset Library",
   LoadingSubtitle = "By Kaonaba, now loading...",
   Theme = "AmberGlow", -- Check https://docs.sirius.menu/rayfield/configuration/themes

   DisableRayfieldPrompts = true,
   DisableBuildWarnings = false, -- Prevents Rayfield from warning when the script has a version mismatch with the interface

   ConfigurationSaving = {
      Enabled = false,
      FolderName = "notascripthehe", -- Create a custom folder for your hub/game
      FileName = "okmaybeitsascript"
   },

   Discord = {
      Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
      Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
      RememberJoins = true -- Set this to false to make them join the discord every time they load it up
   },

   KeySystem = true, -- Set this to true to use our key system
   KeySettings = {
      Title = "The Strongest Battlegrounds Moveset Library",
      Subtitle = "Key System",
      Note = "Join the Kaonaba Discord server and look for the TSB Moveset Library thread in the share-scripts channel", -- Use this to tell the user how to get a key
      FileName = "Kaonaba is the best12345678", -- It is recommended to use something unique as other scripts using Rayfield may overwrite your key file
      SaveKey = true, -- The user's key will be saved, but if you change the key, they will be unable to use your script
      GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like Rayfield to get the key from
      Key = {"KaonabaKey321"} -- List of keys that will be accepted by the system, can be RAW file links (pastebin, github etc) or simple strings ("hello","key22")
   }
})

local GoldenTab = Window:CreateTab("Kaonaba's Movesets", 4483362458) -- Title, Image
local SaitamaSection = GoldenTab:CreateSection("Saitama Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Kyra Gojo",
   Callback = function()
      loadstring(game:HttpGet('https://raw.githubusercontent.com/NotKao/tsbmoveset/refs/heads/main/GOJOTSB'))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Luffy",
   Callback = function()
      loadstring(game:HttpGet("https://github.com/aggiealledge/obfuscated-scripts/raw/refs/heads/main/Protected_7732857839120517.txt"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Sung Jin Woo",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/hamletirl/sunjingwoo/refs/heads/main/sunjingwoo"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Boros",
   Callback = function()
      loadstring(game:HttpGet"https://paste.ee/r/XPIH5")()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Trashcan man",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/yes1nt/yes/refs/heads/main/Trashcan%20Man", true))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Shinji",
   Callback = function()
      getgenv().speedtools = true --- set true if you want use this tool if you want to run
      getgenv().speedpunch= false --- tp and normal Punch
      getgenv().dance= false --- set true if you want to this dance song made by rebzyyx all I want is you 
      getgenv().night= false -- set true if you want to day to night 
      
      loadstring(game:HttpGet('https://raw.githubusercontent.com/Kenjihin69/Kenjihin69/refs/heads/main/Shinji%20tp%20exploit'))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Hakari",
   Callback = function()
      loadstring(game:HttpGet("https://pastebin.com/raw/eEDYWj8p"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Kyra KJ",
   Callback = function()
      --SETTINGS
      _G.TpDash = false --tp dashes
      _G.WallComboFrames = true
      _G.WallCutscene = true --cutscene for wallcombo
      _G.KJAnims = false --Plays real kj anims while others still see the FE anims
      _G.ImpactTransparency = 0 --if u wanna see the world while seeing the frames then set it to 0.3 or smth
      _G.MoreSFX = true -- unused rn --(Recommended if you want more spicier sfx than just official tsb sfx for kj)
      _G.InfiniteKJ = false --(dont use for now, it breaks the script after death aka with num4 or num3) (to disable after use, choose another character)
      _G.CustomBlock = false
      _G.nostunoption = false
      _G.captions = true
      _G.nodashcooldown = false --removes dash cooldown (ONLY WORKS ON PRIVATE SERVERS)
      _G.FightMusic = false --turns ur mindset into the main character (plays under 75% health)
      _G.DashTech = false --might break dash for some users, but allows you to use dash tech

      --[[ NOTES:
      - ULT IS UNFINISHED
      - Get Ultimate 1 by standing still, get Ultimate 2 by walking while Ulting
      - Critical Blow will change depending if u use Barrage before it
      - Ravage does 46.5% Damage
      - Use Variants of 1 or 2 by holding jump button
      - Five Seasons Auto Aims towards the nearest target at a range of 1500 studs (they cant escape)
      - Five Seasons might break for some users that dont have good pcs
      - VARIANTS RELY ON GOOD PING

      TIPS:
      - Stoic Bomb's Range is further on the front by a little
      - Dropkick's Run goes faster in air, but is harder to aim
      - Using death counter wont give ur base movesets names back, which breaks the script,
      which also allows you to keep no stun on, but sacrifices the ability to use Variants
      - To do the M1 tech, u gotta sidedash, m1, and jump, at the same time
      - Downslam + Critical Blow Variant acts the same way as Deadly Ninja's Whirlwind Kick,
      which basically means that if u use Downslam and then use Critical Blow right when they get up,
      it will make then downslammed again (big combo extender)
      ]]

      loadstring(game:HttpGet("https://raw.githubusercontent.com/fartmaggot445/KYR/refs/heads/main/kj"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Vexor",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/VEXOR.lua"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Naruto",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/LolnotaKid/NarutoBeatUpSasukeAss/refs/heads/main/NarutoCums"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Choi Jong In",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/nil071n/fireman/refs/heads/main/TSB"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Jun",
   Callback = function()
      loadstring(game:HttpGet("https://gist.githubusercontent.com/GoldenHeads2/f66279000c58a020e894a6db44914838/raw/62e53e1acacec0b38b43cd0f594292c32e09c39b/gistfile1.txt"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "VHS Sans",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/rF9d3"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "GT Chara",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/0yYkO"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Deku",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/JHtMr"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Todo",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Nova2ezz/Todo-moveset/refs/heads/main/Todo"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Mahito",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Kenjihin69/Kenjihin69/refs/heads/main/Mahitotsbupdate"))()
   end,
})

local GarouSection = GoldenTab:CreateSection("Garou Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Freddy",
   Callback = function()
      loadstring(game:HttpGet('https://pastebin.com/raw/Ft5psDmD'))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Okarun",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Kenjihin69/Kenjihin69/refs/heads/main/Hero%20hunter%20to%20okarun%20fr"))()
      local tool = Instance.new("Tool")
    tool.Name = "Sprint"

    tool.Parent = game.Players.LocalPlayer.Backpack
    tool.RequiresHandle = false

    local moving = false
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    local humanoid = character:WaitForChild("Humanoid")
    local runService = game:GetService("RunService")
    local movementSpeed = 125

    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://18897115785" 
    local animator = humanoid:FindFirstChildOfClass("Animator") or humanoid:WaitForChild("Animator")
    local animationTrack


    local function moveForward()
        while moving do
            local forwardDirection = humanoidRootPart.CFrame.LookVector
            humanoidRootPart.Velocity = forwardDirection * movementSpeed
            runService.Stepped:Wait()
        end
    end

    tool.Equipped:Connect(function()
        moving = true
        animationTrack = animator:LoadAnimation(animation)
        animationTrack:Play()
        moveForward()
    end)

    tool.Unequipped:Connect(function()
        moving = false
        if animationTrack then
            animationTrack:Stop()
        end
    end)
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Garou X KJ",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/damir512/garoukjv1maybeidk/main/Protected_2460290213750059.txt",true))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Angel",
   Callback = function()
      loadstring(game:HttpGet("https://gist.githubusercontent.com/GoldenHeads2/93ddb1b1e2935bc76fbc37aae8985ad2/raw/47dfa45e1e8f1933a1c031b198d40c3cd1499fa2/gistfile1.txt"))() 
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Humbled's GF",
   Callback = function()
      getgenv().color = Color3.new(255, 0, 0) -- customize colour vfx 

      loadstring(game:HttpGet("https://paste.ee/r/7FuWC"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Minos Prime",
   Callback = function()
      _G.SkipIntro = true -- set to true if u want to skip minos prime intro
      _G.Night = false -- set to true if u want night

      loadstring(game:HttpGet("https://raw.githubusercontent.com/S1gmaGuy/MinosPrimeFixed/refs/heads/main/ThefixIsSoSigma"))() 
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Diddy",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/gKC8V"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Mastery Deku",
   Callback = function()
      loadstring(game:HttpGet("https://pastebin.com/raw/xKextYP5"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "A-Train",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/AnZ5j"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Geto",
   Callback = function()
      loadstring(game:HttpGet("https://paste.ee/r/70OTE"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Shinjuku Yuji",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Kenjihin69/Kenjihin69/refs/heads/main/Yuji%20early%20access"))()
   end,
})

local SonicSection = GoldenTab:CreateSection("Sonic Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Voltra",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/VOLTA.lua"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Chainsaw Man",
   Callback = function()
      loadstring(game:HttpGet("https://gist.githubusercontent.com/GoldenHeads2/0fd8d36993c850f3fac89e5adf793076/raw/ab4f5a42bd0b2e24a32a46301d533ea849ca771c/gistfile1.txt"))()
   end,
})

local MetalSection = GoldenTab:CreateSection("Metal Bat Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Reaper",
   Callback = function()
      getgenv().Music = false 
      --Setting this to false usually fixes most executors
      --also it helps load time a little bit
      getgenv().AttackQuality = 'High'
      --Set to Low,High

      getgenv().ConstantSpeed = false
      --if you want your speed to be constant
      loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/main/APOPHENIA.lua"))()
   end,
})

local AtomicSection = GoldenTab:CreateSection("Atomic Samurai Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Sukuna",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/zyrask/Nexus-Base/main/atomic-blademaster%20to%20sukuna"))()
   end,
})

local Button = GoldenTab:CreateButton({
   Name = "Toji",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/NotKao/tsbmoveset/refs/heads/main/TOJI"))()
   end,
})

local SuiryuSection = GoldenTab:CreateSection("Suiryu Movesets")

local Button = GoldenTab:CreateButton({
   Name = "Deku",
   Callback = function()
      loadstring(game:HttpGet("https://github.com/aggiealledge/obfuscated-scripts/raw/refs/heads/main/deku%20suiryu%20thingy.txt"))()
   end,
})

local KJSection = GoldenTab:CreateSection("KJ Movesets")

local Button = GoldenTab:CreateButton({
   Name = "JK",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/NetlessMade/KJ-TO-JK/refs/heads/main/script.lua"))()
   end,
})
-- Only run if the player is in TSB
local cloneref = cloneref or function(o) return o end
COREGUI = cloneref(game:GetService("CoreGui"))
Players = cloneref(game:GetService("Players"))

if not game:IsLoaded() then
    local notLoaded = Instance.new("Message")
    notLoaded.Parent = COREGUI
    notLoaded.Text = "Waiting for game to load..."
    game.Loaded:Wait()
    notLoaded:Destroy()
end

local allowedGames = {
    [10449761463] = true, -- Normal servers and dual servers
    [130818724007978] = true, -- KJ servers
}

if not allowedGames[game.PlaceId] then
    return
end

local playersWithCounter = {}

local function createDeathCounterBillboard(character)
    local head = character:FindFirstChild("Head")
    if not head then return end

    local billboardGui = Instance.new("BillboardGui")
    billboardGui.Name = "DeathCounterGui"
    billboardGui.Adornee = head
    billboardGui.Size = UDim2.new(4, 0, 1, 0)
    billboardGui.StudsOffset = Vector3.new(0, 2, 0)
    billboardGui.AlwaysOnTop = true

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundTransparency = 1

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "Death Counter"
    textLabel.TextColor3 = Color3.new(1, 0, 0)
    textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
    textLabel.TextStrokeTransparency = 0
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextScaled = true
    textLabel.Parent = frame
    frame.Parent = billboardGui
    billboardGui.Parent = character
end

local function removeDeathCounterBillboard(character)
    local billboardGui = character:FindFirstChild("DeathCounterGui")
    if billboardGui then
        billboardGui:Destroy()
    end
end

local function onChildChanged(child, character)
    local player = Players:GetPlayerFromCharacter(character)
    if child.Name:lower() == "counter" and player then
        if child.Parent == character then
            if not playersWithCounter[player] then
                playersWithCounter[player] = true
                createDeathCounterBillboard(character)
            end
        else
            if playersWithCounter[player] then
                playersWithCounter[player] = nil
                removeDeathCounterBillboard(character)
            end
        end
    end
end

local function onCharacterAdded(character)
    character.ChildAdded:Connect(function(child)
        onChildChanged(child, character)
    end)
    character.ChildRemoved:Connect(function(child)
        onChildChanged(child, character)
    end)
end

local function setupPlayer(player)
    player.CharacterAdded:Connect(onCharacterAdded)
    if player.Character then
        onCharacterAdded(player.Character)
    end
end

-- Set up existing players
for _, player in ipairs(Players:GetPlayers()) do
    setupPlayer(player)
end

-- Handle new players joining
Players.PlayerAdded:Connect(setupPlayer)
